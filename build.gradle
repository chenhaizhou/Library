apply plugin: 'java'
apply plugin: 'war'
apply plugin: 'eclipse'
apply plugin: 'tomcat'
apply plugin: 'maven'

buildscript {
    repositories {
        jcenter()
    }

    dependencies {
        classpath 'org.gradle.api.plugins:gradle-tomcat-plugin:1.2.4'
    }
}

group = 'org.qq.com'
version = '1.0'

repositories {
   mavenCentral()                                      
}

dependencies {
   providedCompile 'javax.servlet:servlet-api:2.5'
   runtime 'javax.servlet:jstl:1.1.2'
   def tomcatVersion = '6.0.29'
   tomcat "org.apache.tomcat:catalina:${tomcatVersion}",
           "org.apache.tomcat:coyote:${tomcatVersion}",
           "org.apache.tomcat:jasper:${tomcatVersion}"
}

task createJavaProject << {
    sourceSets*.java.srcDirs*.each { it.mkdirs() }
    sourceSets*.resources.srcDirs*.each { it.mkdirs()}
}

task createWebProject(dependsOn: 'createJavaProject') << {
    def webAppDir = file("$webAppDirName")
    webAppDir.mkdirs()
}

task copy(type: Copy){
  from 'src/main/webapp'
  into 'build'
  //exclude '*.css'
}

uploadArchives {
    repositories {
        maven {
        	credentials {
            	username 'admin'
            	password 'test'
        	}
        	url "http://192.168.33.14:8081/nexus/content/repositories/thirdparty"
    	}
  }


}